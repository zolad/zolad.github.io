<!DOCTYPE html>
<html  lang="en">
<head>
    <meta charset="utf-8" />

<meta name="generator" content="Hexo 4.2.0" />

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

<title>Zola&#39;s Blog</title>


    <meta name="description" content="An Android Developer  Enjoy technology , Enjoy Life">
<meta property="og:type" content="website">
<meta property="og:title" content="Zola&#39;s Blog">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Zola&#39;s Blog">
<meta property="og:description" content="An Android Developer  Enjoy technology , Enjoy Life">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://yoursite.com/images/og_image.png">
<meta property="article:author" content="Zola">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://yoursite.com/images/og_image.png">







<link rel="icon" href="/images/favicon.svg">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.7.2/css/bulma.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,600|Source+Code+Pro">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css">


    
    
<style>body>.footer,body>.navbar,body>.section{opacity:0}</style>

    
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css">

    
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css">

    
    
    
    
<link rel="stylesheet" href="/css/back-to-top.css">

    
    
    
    
    
    
    
    <link rel="stylesheet" href="/css/progressbar.css">
<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>
    
    
    


<link rel="stylesheet" href="/css/style.css">
</head>
<body class="is-3-column">
    <nav class="navbar navbar-main">
    <div class="container">
        <div class="navbar-brand is-flex-center">
            <a class="navbar-item navbar-logo" href="/">
            
                <img src="/images/gen.svg" alt="Zola&#39;s Blog" height="28">
            
            </a>
        </div>
        <div class="navbar-menu">
            
            <div class="navbar-start">
                
                <a class="navbar-item is-active"
                href="/">Home</a>
                
                <a class="navbar-item"
                href="/archives">Archives</a>
                
                <a class="navbar-item"
                href="/categories">Categories</a>
                
                <a class="navbar-item"
                href="/tags">Tags</a>
                
            </div>
            
            <div class="navbar-end">
                
                
                
                <a class="navbar-item search" title="Search" href="javascript:;">
                    <i class="fas fa-search"></i>
                </a>
                
            </div>
        </div>
    </div>
</nav>
    
    <section class="section">
        <div class="container">
            <div class="columns">
                <div class="column is-8-tablet is-8-desktop is-6-widescreen has-order-2 column-main">
    
<div class="card">
    
    <div class="card-image">
        <a href="/2019/12/07/android_driver/camera_driver_config_experience/" class="image is-7by1">
            <img class="thumbnail" src="/gallery/11.jpeg" alt="Android Camera Driver平台(展讯、MTK)适配经验">
        </a>
    </div>
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-12-07T02:00:00.000Z">2019-12-07</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Android-Driver/">Android Driver</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    6 minutes read (About 855 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/12/07/android_driver/camera_driver_config_experience/">Android Camera Driver平台(展讯、MTK)适配经验</a>
            
        </h1>
        <div class="content">
            <h2 id="展讯平台"><a href="#展讯平台" class="headerlink" title="展讯平台"></a>展讯平台</h2><h3 id="1-项目对应kernel-dts文件配置"><a href="#1-项目对应kernel-dts文件配置" class="headerlink" title="1.项目对应kernel/dts文件配置"></a>1.项目对应kernel/dts文件配置</h3><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-variable">&amp;i2c0</span> &#123;<br>	status = <span class="hljs-string">"okay"</span>;<br>	clock-frequency = <span class="hljs-params">&lt;<span class="hljs-number">400000</span>&gt;</span>;<br><br><span class="hljs-symbol">	sensor_main:</span> sensor-<span class="hljs-class">main@3c </span>&#123;<br>		compatible = <span class="hljs-string">"sprd,sensor-main"</span>;<br>		reg = <span class="hljs-params">&lt;<span class="hljs-number">0x3c</span>&gt;</span>;<br>		clock-names = <span class="hljs-string">"clk_src"</span>, <span class="hljs-string">"sensor_eb"</span>,<br>			<span class="hljs-string">"clk_96m"</span>, <span class="hljs-string">"clk_76m8"</span>,<br>			<span class="hljs-string">"clk_48m"</span>, <span class="hljs-string">"clk_26m"</span>;<br>		clocks  = <span class="hljs-params">&lt;<span class="hljs-variable">&amp;clk_sensor0</span>&gt;</span>,<br>			<span class="hljs-params">&lt;<span class="hljs-variable">&amp;clk_mm_ckg_gates</span> <span class="hljs-number">1</span>&gt;</span>,<br>			<span class="hljs-params">&lt;<span class="hljs-variable">&amp;clk_twpll_96m</span>&gt;</span>,<br>			<span class="hljs-params">&lt;<span class="hljs-variable">&amp;clk_twpll_76m8</span>&gt;</span>,<br>			<span class="hljs-params">&lt;<span class="hljs-variable">&amp;clk_twpll_48m</span>&gt;</span>,<br>			<span class="hljs-params">&lt;<span class="hljs-variable">&amp;ext_26m</span>&gt;</span>;<br>		vddio-supply = <span class="hljs-params">&lt;<span class="hljs-variable">&amp;vddcamio</span>&gt;</span>;<br>		vddcama-supply = <span class="hljs-params">&lt;<span class="hljs-variable">&amp;vddcama</span>&gt;</span>;<br>		vddcamd-supply = <span class="hljs-params">&lt;<span class="hljs-variable">&amp;vddcamd</span>&gt;</span>;<br>		vddcammot-supply = <span class="hljs-params">&lt;<span class="hljs-variable">&amp;vddcammot</span>&gt;</span>;<br>		reset-gpios = <span class="hljs-params">&lt;<span class="hljs-variable">&amp;ap_gpio</span> <span class="hljs-number">37</span> <span class="hljs-number">0</span>&gt;</span>;<br>		power-down-gpios = <span class="hljs-params">&lt;<span class="hljs-variable">&amp;ap_gpio</span> <span class="hljs-number">39</span> <span class="hljs-number">0</span>&gt;</span>;<br>		host = <span class="hljs-string">"dcam0"</span>;<br>		<span class="hljs-class">port </span>&#123;<br><span class="hljs-symbol">			sensor_main_0:</span> <span class="hljs-class">endpoint </span>&#123;<br>				remote-endpoint = <span class="hljs-params">&lt;<span class="hljs-variable">&amp;phy0_out</span>&gt;</span>;<br>			&#125;;<br>		&#125;;<br>	&#125;;<br><br>&#125;;<br></code></pre></td></tr></table></figure>

<p>(1).compatible = “sprd,sensor-main”， 这里不需要配摄像头的I2C Device Address，<br>alps/kernel/drivers/misc/sprd_camera/sensor/sprd_sensor_drv.c 会读取这里的id进行处理<br>具体的I2C地址在sensor驱动中配置</p>
<p>(2).reset-gpios，power-down-gpios可通过查看机器板子的原理图来确定对应gpio的引脚修改</p>
<h3 id="2-项目对应device-BoardConfig-mk配置"><a href="#2-项目对应device-BoardConfig-mk配置" class="headerlink" title="2.项目对应device/../../BoardConfig.mk配置"></a>2.项目对应device/../../BoardConfig.mk配置</h3><p>(1).配上前后置摄像头对应Camera Sensor的型号，如：<br>CAMERA_SENSOR_TYPE_BACK := “sp2509 c2590”<br>CAMERA_SENSOR_TYPE_FRONT := “gc030a”</p>
<p>(2).若模组厂打样时摄像头拍照方向为横屏，则TARGET_BOARD_BACK_CAMERA_ROTATION/TARGET_BOARD_FRONT_CAMERA_ROTATION设置为false，否则设置为true。</p>
<p>(3).配置Camera支持的分辨率</p>
<figure class="highlight mk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mk"><span class="hljs-comment">#select camera 2M,3M,5M,8M,13M,16M,21M</span><br>CAMERA_SUPPORT_SIZE := 2M<br>FRONT_CAMERA_SUPPORT_SIZE := 2M<br></code></pre></td></tr></table></figure>

<h3 id="3-vendor-sprd-libcamera配置和添加Camera驱动代码"><a href="#3-vendor-sprd-libcamera配置和添加Camera驱动代码" class="headerlink" title="3.vendor/sprd/../../libcamera配置和添加Camera驱动代码"></a>3.vendor/sprd/../../libcamera配置和添加Camera驱动代码</h3><p>(1).在vendor/sprd/../../libcamera/sensor下放置已经适配了平台的sensor_drv代码，<br>如果没有已经适配了平台的驱动代码，那只能按平台已有的驱动代码为模板按硬件文档进行适配修改。<br>注意修改时尽量按平台已有的camera驱动代码为规范。这方面可以自己修改也可以找FAE帮忙。</p>
<p>(2).修改vendor/sprd/../../libcamera/sensorsensor_cfg.c，配置新Camera</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-meta-keyword">ifdef</span> OV8856</span><br><span class="hljs-keyword">extern</span> SENSOR_INFO_T g_ov8856_mipi_raw_info;<br><span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span><br><br>在对应的sensor_infor_tab添加配置，分别是camera <span class="hljs-keyword">module</span> name/camera name/sensor info/af/otp：<br><span class="hljs-meta">#<span class="hljs-meta-keyword">ifdef</span> OV8856</span><br>    &#123;MODULE_SUNNY, <span class="hljs-string">"ov8856"</span>, &amp;g_ov8856_mipi_raw_info, &#123;&amp;dw9763a_drv_entry, <span class="hljs-number">0</span>&#125;, &amp;ov8856_cmk_drv_entry&#125;,<br><span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span><br></code></pre></td></tr></table></figure>


<hr>
<h2 id="MTK平台"><a href="#MTK平台" class="headerlink" title="MTK平台"></a>MTK平台</h2><h3 id="1-kernel-4-4-drivers-misc-mediatek-imgsensor-inc-kd-imgsensor-h配置"><a href="#1-kernel-4-4-drivers-misc-mediatek-imgsensor-inc-kd-imgsensor-h配置" class="headerlink" title="1.kernel-4.4/drivers/misc/mediatek/imgsensor/inc/kd_imgsensor.h配置"></a>1.kernel-4.4/drivers/misc/mediatek/imgsensor/inc/kd_imgsensor.h配置</h3><figure class="highlight h"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs h"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> S5K4H8_SENSOR_ID                        0x4088</span><br><br><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> SENSOR_DRVNAME_S5K4H8_MIPI_RAW          <span class="hljs-meta-string">"s5k4h8_mipi_raw"</span></span><br></code></pre></td></tr></table></figure>


<h3 id="2-项目对应kernel-4-4-arch-arm-configs-…-xxx-defconfig配置"><a href="#2-项目对应kernel-4-4-arch-arm-configs-…-xxx-defconfig配置" class="headerlink" title="2.项目对应kernel-4.4/arch/arm/configs/…/xxx_defconfig配置"></a>2.项目对应kernel-4.4/arch/arm/configs/…/xxx_defconfig配置</h3><p>可通过查看device目录下项目mk文件里 KERNEL_DEFCONFIG 指向的是哪个config文件<br>CONFIG_CUSTOM_KERNEL_IMGSENSOR=”s5k4h8_mipi_raw”</p>
<p>带debug标签的用于编译过程中查看调试信息</p>
<h3 id="3-项目对应ProjectConfig-mk配置"><a href="#3-项目对应ProjectConfig-mk配置" class="headerlink" title="3.项目对应ProjectConfig.mk配置"></a>3.项目对应ProjectConfig.mk配置</h3><figure class="highlight mk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mk">CUSTOM_HAL_IMGSENSOR = s5k4h8_mipi_raw<br>CUSTOM_HAL_MAIN_IMGSENSOR = s5k4h8_mipi_raw<br>CUSTOM_KERNEL_IMGSENSOR = s5k4h8_mipi_raw<br>CUSTOM_KERNEL_MAIN_IMGSENSOR = s5k4h8_mipi_raw<br></code></pre></td></tr></table></figure>

<h3 id="4-kernel-4-4-drivers-misc-mediatek-imgsensor-src-xxx-xxx-imgsensor-sensor-list-c添加"><a href="#4-kernel-4-4-drivers-misc-mediatek-imgsensor-src-xxx-xxx-imgsensor-sensor-list-c添加" class="headerlink" title="4.kernel-4.4/drivers/misc/mediatek/imgsensor/src/xxx/xxx/imgsensor_sensor_list.c添加"></a>4.kernel-4.4/drivers/misc/mediatek/imgsensor/src/xxx/xxx/imgsensor_sensor_list.c添加</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-meta-keyword">if</span> defined(S5K4H8_MIPI_RAW)</span><br>	&#123;S5K4H8_SENSOR_ID, SENSOR_DRVNAME_S5K4H8_MIPI_RAW, S5K4H8_MIPI_RAW_SensorInit&#125;,<br><span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span><br></code></pre></td></tr></table></figure>

<h3 id="5-kernel-4-4-drivers-misc-mediatek-imgsensor-src-xxx-xxx-imgsensor-sensor-list-h添加"><a href="#5-kernel-4-4-drivers-misc-mediatek-imgsensor-src-xxx-xxx-imgsensor-sensor-list-h添加" class="headerlink" title="5.kernel-4.4/drivers/misc/mediatek/imgsensor/src/xxx/xxx/imgsensor_sensor_list.h添加"></a>5.kernel-4.4/drivers/misc/mediatek/imgsensor/src/xxx/xxx/imgsensor_sensor_list.h添加</h3><figure class="highlight h"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs h"><span class="hljs-function">UINT32 <span class="hljs-title">S5K4H8_MIPI_RAW_SensorInit</span><span class="hljs-params">(PSENSOR_FUNCTION_STRUCT *pfFunc)</span></span>;<br></code></pre></td></tr></table></figure>


<h3 id="6-kernel-4-4-drivers-misc-mediatek-imgsensor-src-xxx-xxx-配置和添加Camera-sensor驱动代码"><a href="#6-kernel-4-4-drivers-misc-mediatek-imgsensor-src-xxx-xxx-配置和添加Camera-sensor驱动代码" class="headerlink" title="6.kernel-4.4/drivers/misc/mediatek/imgsensor/src/xxx/xxx 配置和添加Camera sensor驱动代码"></a>6.kernel-4.4/drivers/misc/mediatek/imgsensor/src/xxx/xxx 配置和添加Camera sensor驱动代码</h3><h3 id="7-kernel-4-4-drivers-misc-mediatek-imgsensor-src-xxx-xxx-imgsensor-cfg-table-c-配置上下电时序"><a href="#7-kernel-4-4-drivers-misc-mediatek-imgsensor-src-xxx-xxx-imgsensor-cfg-table-c-配置上下电时序" class="headerlink" title="7.kernel-4.4/drivers/misc/mediatek/imgsensor/src/xxx/xxx/imgsensor_cfg_table.c 配置上下电时序"></a>7.kernel-4.4/drivers/misc/mediatek/imgsensor/src/xxx/xxx/imgsensor_cfg_table.c 配置上下电时序</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-meta-keyword">if</span> defined(S5K4H8_MIPI_RAW)</span><br>		&#123;<br>			SENSOR_DRVNAME_S5K4H8_MIPI_RAW,<br>			&#123;							<br>				&#123;SensorMCLK, Vol_High, <span class="hljs-number">0</span>&#125;,				<br>				&#123;PDN, Vol_Low, <span class="hljs-number">5</span>&#125;,<br>				&#123;RST, Vol_Low, <span class="hljs-number">5</span>&#125;,<br>				&#123;DVDD, Vol_1200, <span class="hljs-number">0</span>&#125;,<br>				&#123;AVDD, Vol_2800, <span class="hljs-number">0</span>&#125;,<br>				&#123;DOVDD, Vol_1800, <span class="hljs-number">5</span>&#125;,<br>			    &#123;AFVDD, Vol_2800, <span class="hljs-number">0</span>&#125;,<br>				&#123;PDN, Vol_High, <span class="hljs-number">5</span>&#125;,<br>				&#123;RST, Vol_High, <span class="hljs-number">5</span>&#125;				<br>			&#125;,<br>		&#125;,<br><span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span><br></code></pre></td></tr></table></figure>

<h3 id="8-vendor-mediatek-proprietary-custom-xxxx-hal-imgsensor-添加对应Camera驱动代码"><a href="#8-vendor-mediatek-proprietary-custom-xxxx-hal-imgsensor-添加对应Camera驱动代码" class="headerlink" title="8.vendor/mediatek/proprietary/custom/xxxx/hal/imgsensor/ 添加对应Camera驱动代码"></a>8.vendor/mediatek/proprietary/custom/xxxx/hal/imgsensor/ 添加对应Camera驱动代码</h3><h3 id="9-vendor-mediatek-proprietary-custom-xxxx-hal-imgsensor-src-sensorlist-cpp添加"><a href="#9-vendor-mediatek-proprietary-custom-xxxx-hal-imgsensor-src-sensorlist-cpp添加" class="headerlink" title="9.vendor/mediatek/proprietary/custom/xxxx/hal/imgsensor_src/sensorlist.cpp添加"></a>9.vendor/mediatek/proprietary/custom/xxxx/hal/imgsensor_src/sensorlist.cpp添加</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">if</span> defined(S5K4H8_MIPI_RAW)</span><br>    RAW_INFO(S5K4H8_SENSOR_ID, SENSOR_DRVNAME_S5K4H8_MIPI_RAW, S5K4H8_CAM_CALGetCalData),<br><span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span><br></code></pre></td></tr></table></figure>

<h3 id="10-vendor-mediatek-proprietary-custom-xxxx-hal-lens-src-lenslist-cpp添加"><a href="#10-vendor-mediatek-proprietary-custom-xxxx-hal-lens-src-lenslist-cpp添加" class="headerlink" title="10.vendor/mediatek/proprietary/custom/xxxx/hal/lens/src/lenslist.cpp添加"></a>10.vendor/mediatek/proprietary/custom/xxxx/hal/lens/src/lenslist.cpp添加</h3><pre><code class="cpp"><span class="meta">#<span class="meta-keyword">if</span> defined(DW9714AF_S5K4H8_SUNWIN_P130)</span>
    <span class="keyword">extern</span> PFUNC_GETLENSDEFAULT pDW9714AF_S5K4H8_SUNWIN_P130_getDefaultData;
<span class="meta">#<span class="meta-keyword">endif</span></span></code></pre>

        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-image">
        <a href="/2019/11/06/android_system_app/android_dialer_app_video_incall/" class="image is-7by1">
            <img class="thumbnail" src="/gallery/6.jpeg" alt="Android如何屏蔽通话界面的视频彩铃">
        </a>
    </div>
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-11-06T09:36:14.000Z">2019-11-06</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Android-System-App/">Android System App</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    a minute read (About 141 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/11/06/android_system_app/android_dialer_app_video_incall/">Android如何屏蔽通话界面的视频彩铃</a>
            
        </h1>
        <div class="content">
            <p>当电话呼叫对方时，如果对方设置了视频彩铃，则会在呼叫页面出现运营商的视频和彩铃，可以通过修改系统应用中的Dialer App的incall页面来屏蔽。</p>
<hr>
<p>比如MTK平台的Dialer App，路径如下：vendor/mediatek/proprietary/packages/apps/Dialer/java/com/android/incallui/call/DialerCall.java<br>可以通过如下修改：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java">   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">isVideoCall</span><span class="hljs-params">()</span> </span>&#123;<br>-    <span class="hljs-keyword">return</span> getVideoTech().isTransmittingOrReceiving();<br>+    <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;<span class="hljs-comment">//getVideoTech().isTransmittingOrReceiving();</span><br>   &#125;<br></code></pre></td></tr></table></figure>

<p>或者修改vendor/mediatek/proprietary/packages/apps/Dialer/java/com/android/incallui/InCallActivity.java 的<br>private static ShouldShowUiResult getShouldShowVideoUi() 方法使其不显示视频页面</p>

        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-image">
        <a href="/2019/08/28/java_certificate_verify/java_certificate_verify_and_decript/" class="image is-7by1">
            <img class="thumbnail" src="/gallery/5.jpeg" alt="JAVA根证书验证用户证书是否可信和解密数据">
        </a>
    </div>
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-08-27T16:00:00.000Z">2019-08-28</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Java-Certificate/">Java Certificate</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    2 minutes read (About 357 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/08/28/java_certificate_verify/java_certificate_verify_and_decript/">JAVA根证书验证用户证书是否可信和解密数据</a>
            
        </h1>
        <div class="content">
            <p>一般用户证书和加密数据是一起发放到客户端的，但是使用用户证书的公钥解密数据前需要验证用户证书是否可信，即从源头来说是否由根证书签发的，按证书链去认证。使用根证书验证用户证书可信并解密的Java实现如下：</p>
<p>1.读取根证书文件初始化根证书对象，并获取根证书中的公钥</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">CertificateFactory certificateFactory = CertificateFactory.getInstance(<span class="hljs-string">"X.509"</span>);<br>Certificate rootCert = certificateFactory.generateCertificate(<span class="hljs-keyword">new</span> FileInputStream(rootCertPath));<br>PublicKey rootCertPublicKey = rootCert.getPublicKey();<br></code></pre></td></tr></table></figure>


<p>2.使用用户证书byte数组数据初始化用户证书对象</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">X509Certificate userCert = (X509Certificate)certificateFactory.generateCertificate(<br>                <span class="hljs-keyword">new</span> ByteArrayInputStream(userCertByteArray));<br></code></pre></td></tr></table></figure>

<p>3.使用用户证书验证根证书的公钥，如果验证通过（即不抛出Exception）说明这个用户证书是这个根证书签发的,同时检查用户证书是否有效</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">try</span> &#123;<br>       userCert.verify(rootCertPublicKey);<br>       userCert.checkValidity();<br>       Log.d(TAG,<span class="hljs-string">"------------- 工作证书验证成功 -----------"</span>);<br>&#125;<span class="hljs-keyword">catch</span> (Exception e) &#123;<br>       Log.d(TAG,<span class="hljs-string">"------------- 工作证书验证失败 -----------"</span>);<br>        <br>&#125;<br></code></pre></td></tr></table></figure>

<p>4.最后使用用户证书的公钥进行解密</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">try</span> &#123;<br>    Cipher cipher = Cipher.getInstance(<span class="hljs-string">"RSA/ECB/NoPadding"</span>);<br>	cipher.init(Cipher.DECRYPT_MODE, userCert);<br>    <span class="hljs-keyword">byte</span>[] output = cipher.doFinal(cipherData);<br>    <span class="hljs-keyword">return</span> output;<br>&#125; <span class="hljs-keyword">catch</span> (NoSuchAlgorithmException e) &#123;<br>    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Exception(<span class="hljs-string">"无此解密算法"</span>);<br>&#125; <span class="hljs-keyword">catch</span> (NoSuchPaddingException e) &#123;<br>    e.printStackTrace();<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;<br>&#125; <span class="hljs-keyword">catch</span> (InvalidKeyException e) &#123;<br>    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Exception(<span class="hljs-string">"解密公钥非法,请检查"</span>);<br>&#125; <span class="hljs-keyword">catch</span> (IllegalBlockSizeException e) &#123;<br>    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Exception(<span class="hljs-string">"密文长度非法"</span>);<br>&#125; <span class="hljs-keyword">catch</span> (BadPaddingException e) &#123;<br>    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Exception(<span class="hljs-string">"密文数据已损坏"</span>);<br>&#125;<br></code></pre></td></tr></table></figure>
        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-image">
        <a href="/2019/08/27/uvccamera/android_uvccamera_experience_and_bug/" class="image is-7by1">
            <img class="thumbnail" src="/gallery/3.jpeg" alt="Android UVCCamera/libuvc遇到的卡死崩溃bug和解决方法">
        </a>
    </div>
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-08-26T16:00:00.000Z">2019-08-27</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Android-UVCCamera-libuvc/">Android UVCCamera/libuvc</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    6 minutes read (About 869 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/08/27/uvccamera/android_uvccamera_experience_and_bug/">Android UVCCamera/libuvc遇到的卡死崩溃bug和解决方法</a>
            
        </h1>
        <div class="content">
            <p>分享下debug uvccamera/libuvc这些so库遇到的卡死崩溃问题和思路</p>
<hr>
<h3 id="1-UVCCamera执行stopPreview或release时阻塞卡死"><a href="#1-UVCCamera执行stopPreview或release时阻塞卡死" class="headerlink" title="1.UVCCamera执行stopPreview或release时阻塞卡死"></a>1.UVCCamera执行stopPreview或release时阻塞卡死</h3><p>在多次重复打开关闭uvc摄像头的时候，上层调用stopPreview/release会概率性卡死，经过调试一步步定位调用函数和阻塞住的位置</p>
<p>android java层调用略，下面直接从so库的代码开始；<br> –&gt;<br>UVCCamera/UVCCamera.cpp-stopPreview()<br> –&gt;<br>UVCCamera/UVCPreView.cpp-stopPreview()<br>这里设置mIsRunning = false;停止预览帧处理；<br>调试发现，在下面这一句代码阻塞住没有往下走了：<br>pthread_join(preview_thread, NULL) != EXIT_SUCCESS;<br>pthread_join会阻塞到preview_thread预览线程执行结束为止，所以预览处理没有正常结束；<br>–&gt;<br>UVCCamera/UVCPreview.cpp-do_preview()<br>结束预览时会停止libuvc的流处理uvc_stop_streaming(mDeviceHandle);，所以流处理没有正常结束；<br>–&gt;<br>libuvc/stream.c-uvc_stop_streaming()<br>–&gt;<br>libuvc/stream.c-uvc_stream_close()<br>–&gt;<br>libuvc/stream.c-uvc_stream_stop()<br>这一步停止流的传输，并将所有流转换器都释放掉：<br>strmh-&gt;running = 0;并遍历调用libusb_cancel_transfer(strmh-&gt;transfers[i]);<br>至于关键的阻塞代码如下：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">/* Wait for transfers to complete/cancel */</span><br>	<span class="hljs-keyword">for</span> (; <span class="hljs-number">1</span> ;) &#123;<br>		<span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; LIBUVC_NUM_TRANSFER_BUFS; i++) &#123;<br>			<span class="hljs-keyword">if</span> (strmh-&gt;transfers[i] != <span class="hljs-literal">NULL</span>)<br>				<span class="hljs-keyword">break</span>;<br>		&#125;<br>		<span class="hljs-keyword">if</span> (i == LIBUVC_NUM_TRANSFER_BUFS)<br>			<span class="hljs-keyword">break</span>;<br>		pthread_cond_wait(&amp;strmh-&gt;cb_cond, &amp;strmh-&gt;cb_mutex);<br>	&#125;<br></code></pre></td></tr></table></figure>
<p>这里会一直循环等待所有流转换器都释放置空完成，而问题就在于偏偏有个别流转换器就是无法正常释放。</p>
<p>为什么没有正常释放完成，<br>是因为libusb_cancel_transfer失败返回LIBUSB_ERROR_NOT_FOUND的状态时，<br>转换器持有无效的buffer和指针，导致上面的循环代码一直不往下走。</p>
<p>一般释放正常时的Log如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs log">[4632*stream.c:989:_uvc_stream_callback]:not retrying transfer, status &#x3D; 3<br>[4632*stream.c:629:_uvc_delete_transfer]:begin<br>[4632*stream.c:642:_uvc_delete_transfer]:Freeing transfer 5 (0x72fdbe5960)<br>[4632*stream.c:656:_uvc_delete_transfer]:end<br></code></pre></td></tr></table></figure>
<p>但函数阻塞住时，我发现并没有看到index为6的transfer执行delete的Log，于是我怀疑是否跟transfer的数量有关。</p>
<p>这时查看源码里有一个transfer buffers的数量定义如下：</p>
<figure class="highlight h"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs h">libuvc/libuvc_internal.h<br><span class="hljs-comment">/*</span><br><span class="hljs-comment">  set a high number of transfer buffers. This uses a lot of ram, but</span><br><span class="hljs-comment">  avoids problems with scheduling delays on slow boards causing missed</span><br><span class="hljs-comment">  transfers. A better approach may be to make the transfer thread FIFO</span><br><span class="hljs-comment">  scheduled (if we have root).</span><br><span class="hljs-comment">  We could/should change this to allow reduce it to, say, 5 by default</span><br><span class="hljs-comment">  and then allow the user to change the number of buffers as required.</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> LIBUVC_NUM_TRANSFER_BUFS 10</span><br></code></pre></td></tr></table></figure>
<p>如果设置得太高，不仅会提高内存的占用，在处理速度慢的板子上也会有transfer浪费掉。<br>这里我尝试降低数量值为5，再次调试开关100次，stopPreview卡死的问题不再复现。</p>
<h3 id="2-JNI-DETECTED-ERROR-IN-APPLICATION-jmethodID-was-NULL-空指针"><a href="#2-JNI-DETECTED-ERROR-IN-APPLICATION-jmethodID-was-NULL-空指针" class="headerlink" title="2.JNI DETECTED ERROR IN APPLICATION: jmethodID was NULL  空指针"></a>2.JNI DETECTED ERROR IN APPLICATION: jmethodID was NULL  空指针</h3><p>由于java上层设置setFrameCallback(null, 0); iframecallback_fields.onFrame在另外一个线程被置为NULL<br>而以下这段代码没有判空，导致的空指针：<br><font color='red'>env-&gt;CallVoidMethod(mFrameCallbackObj, iframecallback_fields.onFrame, buf);</font></p>
<p>解决方法为增加空指针判断如下</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">UVCPreview::do_capture_callback</span><span class="hljs-params">(JNIEnv *env, <span class="hljs-keyword">uvc_frame_t</span> *frame)</span></span>&#123;<br>...<br>+<span class="hljs-keyword">if</span> (iframecallback_fields.onFrame != <span class="hljs-literal">NULL</span>) &#123;<br>  env-&gt;CallVoidMethod(mFrameCallbackObj, iframecallback_fields.onFrame, buf);<br>+&#125;<br>...<br>&#125;<br></code></pre></td></tr></table></figure>


<h3 id="3-UVCCamera-could-not-open-camera-err-99"><a href="#3-UVCCamera-could-not-open-camera-err-99" class="headerlink" title="3.UVCCamera could not open camera:err=-99"></a>3.UVCCamera could not open camera:err=-99</h3><p>要检查打开的usb设备是否已经被其他进程打开了/其他进程持有没释放/打开的是不是UVC摄像头，是否打开了错误的其他usb设备</p>
<h3 id="4-其他一些别人发现的bug和修复方法"><a href="#4-其他一些别人发现的bug和修复方法" class="headerlink" title="4.其他一些别人发现的bug和修复方法"></a>4.其他一些别人发现的bug和修复方法</h3><p><a href="https://github.com/saki4510t/UVCCamera/pull/520">https://github.com/saki4510t/UVCCamera/pull/520</a><br><a href="https://github.com/saki4510t/UVCCamera/pull/328">https://github.com/saki4510t/UVCCamera/pull/328</a></p>

        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-image">
        <a href="/2019/04/02/android_system/android_sprd_mtk_alarm_group_whitelist/" class="image is-7by1">
            <img class="thumbnail" src="/gallery/7.jpeg" alt="Android 展讯/MTK Alarm白名单设置">
        </a>
    </div>
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-04-01T16:00:00.000Z">2019-04-02</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Android-System/">Android System</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    2 minutes read (About 358 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/04/02/android_system/android_sprd_mtk_alarm_group_whitelist/">Android 展讯/MTK Alarm白名单设置</a>
            
        </h1>
        <div class="content">
            <p>目前大部分应用都会通过AlarmManager设置 alarm 来定时或周期唤醒系统来做一些操作。这种随机的 alarm 唤醒会增加系统的待机功耗。所以平台厂商为了功耗优化，一方面禁止了非白名单的第三方应用在系统休眠时唤醒系统，一方面做了心跳对齐的机制（即将这些唤醒时间杂乱的alarm修改为统一时间唤醒）。</p>
<p>当然Android M开始也引入了Doze机制，Doze机制的白名单和平台的Alarm白名单最好都配置上对应的包名。</p>
<hr>
<h3 id="展讯平台"><a href="#展讯平台" class="headerlink" title="展讯平台"></a>展讯平台</h3><p>修改路径：vendor\sprd\platform\frameworks\native\data\etc\appPowerSaveConfig.xml</p>
<p>在配置文件中添加应用包名</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">package</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"com.my.app"</span> <span class="hljs-attr">optimize</span>=<span class="hljs-string">"1"</span> <span class="hljs-attr">alarm</span>=<span class="hljs-string">"2"</span> <span class="hljs-attr">wakelock</span>=<span class="hljs-string">"2"</span> <span class="hljs-attr">network</span>=<span class="hljs-string">"0"</span> <span class="hljs-attr">autolaunch</span>=<span class="hljs-string">"2"</span> <span class="hljs-attr">secondarylaunch</span>=<span class="hljs-string">"2"</span> <span class="hljs-attr">lockscreencleanup</span>=<span class="hljs-string">"2"</span> <span class="hljs-attr">consumertype</span>=<span class="hljs-string">"0"</span> /&gt;</span><br></code></pre></td></tr></table></figure>
<ul>
<li>optimize 对应是否对该应用进行省电优化的总开关，0 为不优化，1 为优化</li>
<li>alarm 对应待机唤醒优化，0 对应自动，1 对应优化，2 对应不优化</li>
<li>wakelock 对应待机休眠优化，0 对应自动，1 对应优化，2 对应不优化</li>
</ul>
<hr>
<h3 id="MTK平台"><a href="#MTK平台" class="headerlink" title="MTK平台"></a>MTK平台</h3><p>修改路径：frameworks/base/core/java/com/mediatek/amplus/config/alarmplus.config</p>
<p>如果没有该文件就创建一个，在配置文件中添加应用包名</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs config">1com.my.app<br>2com.my.app2<br></code></pre></td></tr></table></figure>

<p>另外将该文件拷贝到system/etc下</p>
<figure class="highlight mk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mk"><span class="hljs-comment">#alarmplus</span><br>PRODUCT_COPY_FILES += \<br><span class="hljs-section">vendor/mediatek/proprietary/frameworks/opt/amplus/config/alarmplus.config:system/etc/alarmplus.config:mtk</span><br></code></pre></td></tr></table></figure>
        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-image">
        <a href="/2019/02/08/android_java_framework/android_phone_whitelist/" class="image is-7by1">
            <img class="thumbnail" src="/gallery/9.jpeg" alt="Android 实现电话号码（接听/拨号/短信）白名单">
        </a>
    </div>
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-02-07T16:00:00.000Z">2019-02-08</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Android-Java-framework/">Android Java framework</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    4 minutes read (About 549 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/02/08/android_java_framework/android_phone_whitelist/">Android 实现电话号码（接听/拨号/短信）白名单</a>
            
        </h1>
        <div class="content">
            <p>我遇到一个需求，需要实现电话号码的白名单，除了通讯录里的号码，所有来电短信都要屏蔽掉。</p>
<p>Android 7.0后提供了一个电话号码黑名单的功能，可以拦截对应号码的电话和短信，即Android N BlockedNumberContract原生黑名单。</p>
<p>所以我这里就直接利用这个模块的函数，再此之上增加白名单判断。</p>
<hr>
<h3 id="白名单电话接听拦截和短信拦截"><a href="#白名单电话接听拦截和短信拦截" class="headerlink" title="白名单电话接听拦截和短信拦截"></a>白名单电话接听拦截和短信拦截</h3><p>这里直接利用BlockedNumberContract框架里的关键判断类BlockChecker，BlockChecker的isBlocked函数会返回一个bool值，根据这个bool值，BlockedNumberContract框架会决定是否拦截对应号码的电话和短信。</p>
<p>修改位置 frameworks\opt\telephony\src\java\com\android\internal\telephony\BlockChecker.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs java">   <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * Returns &#123;<span class="hljs-doctag">@code</span> true&#125; if &#123;<span class="hljs-doctag">@code</span> phoneNumber&#125; is blocked.</span><br><span class="hljs-comment">     * &lt;p&gt;</span><br><span class="hljs-comment">     * This method catches all underlying exceptions to ensure that this method never throws any</span><br><span class="hljs-comment">     * exception.</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">isBlocked</span><span class="hljs-params">(Context context, String phoneNumber)</span> </span>&#123;<br>        <span class="hljs-keyword">boolean</span> isBlocked = <span class="hljs-keyword">false</span>;<br>        <span class="hljs-keyword">long</span> startTimeNano = System.nanoTime();<br><br>        <span class="hljs-keyword">try</span> &#123;<br>+        	<span class="hljs-comment">//注释掉这部分原生判断，会读取BlockedNumberContract数据库里的名单作对比</span><br>+            <span class="hljs-comment">// if (BlockedNumberContract.SystemContract.shouldSystemBlockNumber(</span><br>+           <span class="hljs-comment">//         context, phoneNumber)) &#123;</span><br>+            <span class="hljs-comment">//     Rlog.d(TAG, phoneNumber + " is blocked.");</span><br>+            <span class="hljs-comment">//     isBlocked = true;</span><br>+            <span class="hljs-comment">// &#125;</span><br><br>+             <span class="hljs-comment">//新增一个shouldBlockNumber函数，这里可以根据自己需求，从什么数据库读取白名单来判断对应号码是否该拦截</span><br>+               <span class="hljs-keyword">if</span> (shouldBlockNumber( context, phoneNumber)) &#123;<br>+                Log.d(TAG, phoneNumber + <span class="hljs-string">" is blocked."</span>);<br>+                isBlocked = <span class="hljs-keyword">true</span>;<br>+            &#125;<br>            <br><br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            Rlog.e(TAG, <span class="hljs-string">"Exception checking for blocked number: "</span> + e);<br>           <br>        &#125;<br><br>        <span class="hljs-keyword">int</span> durationMillis = (<span class="hljs-keyword">int</span>) ((System.nanoTime() - startTimeNano) / <span class="hljs-number">1000000</span>);<br>        <span class="hljs-keyword">if</span> (durationMillis &gt; <span class="hljs-number">500</span> || VDBG) &#123;<br>            Rlog.d(TAG, <span class="hljs-string">"Blocked number lookup took: "</span> + durationMillis + <span class="hljs-string">" ms."</span>);<br>        &#125;<br>        <span class="hljs-keyword">return</span> isBlocked;<br>    &#125;<br></code></pre></td></tr></table></figure>

<p>如果不想短信受控制，可以修改<br>frameworks/opt/telephony/src/java/com/android/internal/telephony/InboundSmsHandler.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java">-            block = BlockChecker.isBlocked(mContext, tracker.getDisplayAddress());<br>+		    <span class="hljs-comment">// not block </span><br>+           <span class="hljs-comment">// block = BlockChecker.isBlocked(mContext, tracker.getDisplayAddress());</span><br><br><br>-                        block = BlockChecker.isBlocked(mContext,<br>-                                cursor.getString(PDU_SEQUENCE_PORT_PROJECTION_INDEX_MAPPING<br>-                                        .get(DISPLAY_ADDRESS_COLUMN)));<br><br>+		<span class="hljs-comment">// not block </span><br>+                    <span class="hljs-comment">//    block = BlockChecker.isBlocked(mContext,</span><br>+                    <span class="hljs-comment">//            cursor.getString(PDU_SEQUENCE_PORT_PROJECTION_INDEX_MAPPING</span><br>+                    <span class="hljs-comment">//                    .get(DISPLAY_ADDRESS_COLUMN)));</span><br><br>``` <br><br><br>frameworks/opt/telephony/src/java/com/android/internal/telephony/WapPushOverSms.java<br>``` <br>-                <span class="hljs-keyword">if</span> (nInd.getFrom() != <span class="hljs-keyword">null</span><br>-                        &amp;&amp; BlockChecker.isBlocked(mContext, nInd.getFrom().getString())) &#123;<br>+<br>+		<span class="hljs-comment">// not block </span><br>+		<span class="hljs-comment">// &amp;&amp; BlockChecker.isBlocked(mContext, nInd.getFrom().getString())</span><br>+                <span class="hljs-keyword">if</span> (nInd.getFrom() != <span class="hljs-keyword">null</span>) &#123;<br></code></pre></td></tr></table></figure>
<hr>
<h3 id="电话拨号拦截"><a href="#电话拨号拦截" class="headerlink" title="电话拨号拦截"></a>电话拨号拦截</h3><p>修改位置 proprietary/packages/services/Telecomm/src/com/android/server/telecom/CallIntentProcessor.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java">    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * Processes CALL, CALL_PRIVILEGED, and CALL_EMERGENCY intents.</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> intent Call intent containing data about the handle to call.</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">processOutgoingCallIntent</span><span class="hljs-params">(</span></span><br><span class="hljs-function"><span class="hljs-params">            Context context,</span></span><br><span class="hljs-function"><span class="hljs-params">            CallsManager callsManager,</span></span><br><span class="hljs-function"><span class="hljs-params">            Intent intent)</span> </span>&#123;<br><br><br><br>            	    <span class="hljs-keyword">if</span> (phoneNumber != <span class="hljs-keyword">null</span>) &#123;<br>            <span class="hljs-keyword">if</span> (!PhoneNumberUtils.isUriNumber(phoneNumber)) &#123;  <br>               phoneNumber = PhoneNumberUtils.convertAndStrip(phoneNumber);  <br>            &#125;  <br>        &#125;<br><br>+        <span class="hljs-keyword">if</span> (shouldBlockNumber(context,phoneNumber)) &#123;<br>+                <br>+                Log.d(CallIntentProcessor.class,phoneNumber + " is blocked.");<br>+<br>+                <span class="hljs-keyword">return</span>;<br>+        &#125;<br><br><br>    &#125;<br></code></pre></td></tr></table></figure>
        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-image">
        <a href="/2019/02/07/android_driver/sprd_key_driver_experience/" class="image is-7by1">
            <img class="thumbnail" src="/gallery/13.jpeg" alt="展讯物理按键配置经验">
        </a>
    </div>
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-02-07T09:36:14.000Z">2019-02-07</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Android-Driver/">Android Driver</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    a minute read (About 222 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/02/07/android_driver/sprd_key_driver_experience/">展讯物理按键配置经验</a>
            
        </h1>
        <div class="content">
            <p>展讯系统驱动配置物理按键，首先查看硬件原理图，找到对应物理按键的管脚，比如按键5接的是gpio125</p>
<p>1.打开kernel/arch/arm/boot/dts/对应项目的.dts文件<br>修改gpio_keys下的配置，gpios修改对应的gpio引脚号</p>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-class">gpio_keys </span>&#123;<br> 		<span class="hljs-class">key_5 </span>&#123;<br> 			label = <span class="hljs-string">"5 Key"</span>;<br>			linux,code = <span class="hljs-params">&lt;<span class="hljs-number">6</span>&gt;</span>;<br>-			gpios = <span class="hljs-params">&lt;<span class="hljs-variable">&amp;ap_gpio</span> <span class="hljs-number">92</span> <span class="hljs-number">1</span>&gt;</span>;<br>+			gpios = <span class="hljs-params">&lt;<span class="hljs-variable">&amp;ap_gpio</span> <span class="hljs-number">125</span> <span class="hljs-number">1</span>&gt;</span>;<br> 			gpio-key,wakeup;<br>			gpio-key,level-trigger;<br> 		&#125;;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p>linux,code对应的就是KEY CODE<br>gpio-key,wakeup代表按下时如果系统正在休眠会触发唤醒<br>gpio-key,level-trigger 表示增加电平触发判断</p>
<p>2.打开u-boot15/board/spreadtrum/对应项目的pinmap .c文件</p>
<p>对照平台GPIO_Spec的xls表，找到gpio125对应的Ball Name，修改Fuction为默认gpio功能:BITS_PIN_AF(3)</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c">&#123;REG_PIN_RTCK_LTE,                      BITS_PIN_AF(<span class="hljs-number">3</span>)&#125;,<br>&#123;REG_MISC_PIN_RTCK_LTE,                 BITS_PIN_DS(<span class="hljs-number">1</span>)|BIT_PIN_NULL|BIT_PIN_NUL|BIT_PIN_SLP_AP|BIT_PIN_SLP_NUL|BIT_PIN_SLP_OE&#125;,<br></code></pre></td></tr></table></figure>
        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-image">
        <a href="/2019/01/05/android_java_framework/android_java_framework_experience/" class="image is-7by1">
            <img class="thumbnail" src="/gallery/10.jpeg" alt="Android Java framework各种各样的修改经验">
        </a>
    </div>
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-01-05T09:36:14.000Z">2019-01-05</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Android-Java-framework/">Android Java framework</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    6 minutes read (About 860 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/01/05/android_java_framework/android_java_framework_experience/">Android Java framework各种各样的修改经验</a>
            
        </h1>
        <div class="content">
            <p>顺手记录下修改系统时的经验,网上很容易就能搜到的就不记录了</p>
<hr>
<h3 id="修改下拉快捷菜单栏的菜单列表"><a href="#修改下拉快捷菜单栏的菜单列表" class="headerlink" title="修改下拉快捷菜单栏的菜单列表:"></a>修改下拉快捷菜单栏的菜单列表:</h3><p>主要搜索qstile相关的类</p>
<p>xxxx/packages/apps/SystemUI/res/values/config.xml</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java">&lt;!-- The <span class="hljs-keyword">default</span> tiles to display in QuickSettings --&gt;<br>&lt;string name=<span class="hljs-string">"quick_settings_tiles_default"</span> translatable=<span class="hljs-string">"false"</span>&gt;<br>wifi,bt,dnd,rotation,battery,cell,cast<br>&lt;/string&gt;<br><br>&lt;!-- Tiles <span class="hljs-keyword">native</span> to System UI. Order should match <span class="hljs-string">"quick_settings_tiles_default"</span> --&gt;<br>&lt;string name=<span class="hljs-string">"quick_settings_tiles_stock"</span> translatable=<span class="hljs-string">"false"</span>&gt;<br>wifi,cell,battery,dnd,rotation,bt,location,hotspot,inversion,saver,work,cast,night<br>&lt;/string&gt;<br></code></pre></td></tr></table></figure>
<hr>
<h3 id="如何在framework层获取当前api被调用时的进程对应的app的application-context"><a href="#如何在framework层获取当前api被调用时的进程对应的app的application-context" class="headerlink" title="如何在framework层获取当前api被调用时的进程对应的app的application context:"></a>如何在framework层获取当前api被调用时的进程对应的app的application context:</h3><p>ActivityThread.currentActivityThread().getApplication()</p>
<hr>
<h3 id="去除-hide-但-make-update-api和编译出错解决方法"><a href="#去除-hide-但-make-update-api和编译出错解决方法" class="headerlink" title="去除@hide 但 make update-api和编译出错解决方法:"></a>去除@hide 但 make update-api和编译出错解决方法:</h3><p>如果make update-api报错的话<br>要看对应方法里是不是有其他@hide的类或方法,比如参数的类是hide的,调用的api是hide的<br>要将所有相关的变量和api都去除hide,才能update成功<br>比如:<br>void aaa(B bbb){<br>    ccc(bbb);<br>}<br>要保证B的类和ccc函数是非hide的</p>
<hr>
<h3 id="如何修改系统通话UI界面"><a href="#如何修改系统通话UI界面" class="headerlink" title="如何修改系统通话UI界面:"></a>如何修改系统通话UI界面:</h3><p>路径为：<br>packages/apps/Dialer/java/com/android/incallui/incall/impl<br>vendor/xxxxx/proprietary/packages/apps/Dialer/java/com/android/incallui/incall/impl</p>
<p>InCallFragment ，InCallButtonGridFragment是关键类，有很多代理类和presenter类</p>
<hr>
<h3 id="UsbManager在连接usb设备时需要request权限才能连接到usb设备-如何跳过申请权限的弹框-默认赋予权限呢"><a href="#UsbManager在连接usb设备时需要request权限才能连接到usb设备-如何跳过申请权限的弹框-默认赋予权限呢" class="headerlink" title="UsbManager在连接usb设备时需要request权限才能连接到usb设备,如何跳过申请权限的弹框,默认赋予权限呢"></a>UsbManager在连接usb设备时需要request权限才能连接到usb设备,如何跳过申请权限的弹框,默认赋予权限呢</h3><p>可以修改framework下的UsbUserSettingsManager:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java">  <span class="hljs-comment">// Temporary mapping USB device name to list of UIDs with permissions for the device</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> HashMap&lt;String, SparseBooleanArray&gt; mDevicePermissionMap =<br>            <span class="hljs-keyword">new</span> HashMap&lt;&gt;();<br>    <span class="hljs-comment">// Temporary mapping UsbAccessory to list of UIDs with permissions for the accessory</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> HashMap&lt;UsbAccessory, SparseBooleanArray&gt; mAccessoryPermissionMap =<br>            <span class="hljs-keyword">new</span> HashMap&lt;&gt;();<br><br>两个hashmap分别储存的uid和对应的usbdevice,只要存在即允许了权限<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">hasPermission</span><span class="hljs-params">(UsbDevice device, String packageName, <span class="hljs-keyword">int</span> uid)</span> </span>&#123;<br>        <span class="hljs-keyword">synchronized</span> (mLock) &#123;<br>            <span class="hljs-keyword">if</span> (isCameraDevicePresent(device)) &#123;<br>		<span class="hljs-comment">//camera权限,usb camera需要额外的camera权限</span><br>                <span class="hljs-keyword">if</span> (!isCameraPermissionGranted(packageName, uid)) &#123;<br>                    <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;<br>                &#125;<br>            &#125;<br>		<span class="hljs-comment">//如果是系统uid,或者mDisablePermissionDialogs 设置禁用usb权限询问框,则默认拥有权限</span><br>            <span class="hljs-keyword">if</span> (uid == Process.SYSTEM_UID || mDisablePermissionDialogs) &#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;<br>            &#125;<br>		<span class="hljs-comment">//获取对应usbdevice的已允许权限uid,如果uid存在则判断拥有权限</span><br>            SparseBooleanArray uidList = mDevicePermissionMap.get(device.getDeviceName());<br>            <span class="hljs-keyword">if</span> (uidList == <span class="hljs-keyword">null</span>) &#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;<br>            &#125;<br>            <span class="hljs-keyword">return</span> uidList.get(uid);<br> <br>        &#125;<br>    &#125;<br></code></pre></td></tr></table></figure>

<hr>
<h3 id="系统编译自定义覆盖代码"><a href="#系统编译自定义覆盖代码" class="headerlink" title="系统编译自定义覆盖代码"></a>系统编译自定义覆盖代码</h3><p>资源文件：</p>
<p>Android Overlay机制允许在不修改packages中apk的情况下，来自定义 framework/package/vendor中的资源文件，实现资源的定制。来达到显示不同的UI得目的</p>
<p>PRODUCT_PACKAGE_OVERLAYS :=  device/vendor-name/device-name/product-name/overlay</p>
<p>Or：</p>
<p>DEVICE_PACKAGE_OVERLAYS :=  device/vendor-name/device-name/common/overlay</p>
<p>注意只能修改xml之类的资源文件,java文件无法替换。</p>
<p>代码文件：</p>
<p>通过修改 envsetup 和 lunch执行的mk文件，比如在build/core/envsetup.mk添加复制替换代码：</p>
<p>$(shell \cp -rf vendor/mediatek/xxxx/Camera.java frameworks/base/core/java/android/hardware/Camera.java)</p>
<hr>
<h3 id="通讯录如何判断是否是sim卡储存的号码："><a href="#通讯录如何判断是否是sim卡储存的号码：" class="headerlink" title="通讯录如何判断是否是sim卡储存的号码："></a>通讯录如何判断是否是sim卡储存的号码：</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"> <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String ACCOUNT_TYPE_SIM = <span class="hljs-string">"SIM Account"</span>;<br> <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String ACCOUNT_TYPE_USIM = <span class="hljs-string">"USIM Account"</span>;<br> <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String ACCOUNT_TYPE_RUIM = <span class="hljs-string">"RUIM Account"</span>;<br> <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String ACCOUNT_TYPE_CSIM = <span class="hljs-string">"CSIM Account"</span>;<br><br><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">isAccountTypeIccCard</span><span class="hljs-params">(String accountTypeString)</span> </span>&#123;<br>     <span class="hljs-keyword">boolean</span> isIccCardAccount = (ACCOUNT_TYPE_SIM.equals(accountTypeString)<br>             || ACCOUNT_TYPE_USIM.equals(accountTypeString)<br>             || ACCOUNT_TYPE_RUIM.equals(accountTypeString)<br>             || ACCOUNT_TYPE_CSIM.equals(accountTypeString));<br>     <span class="hljs-comment">//Log.d(TAG, "account " + accountTypeString + " is IccCard? " + isIccCardAccount);</span><br>     <span class="hljs-keyword">return</span> isIccCardAccount;<br> &#125;<br></code></pre></td></tr></table></figure>

<hr>
<h3 id="app监听短信接收，只能监听到短短信，监听不到长短信："><a href="#app监听短信接收，只能监听到短短信，监听不到长短信：" class="headerlink" title="app监听短信接收，只能监听到短短信，监听不到长短信："></a>app监听短信接收，只能监听到短短信，监听不到长短信：</h3><p>检查系统短信应用Mms，长短信是需要系统短信应用去操作拼接的</p>
<hr>
<h3 id="修改系统蓝牙功能支持类型"><a href="#修改系统蓝牙功能支持类型" class="headerlink" title="修改系统蓝牙功能支持类型"></a>修改系统蓝牙功能支持类型</h3><p>vendor/xxxx/proprietary/packages/apps/Bluetooth/res/values/config.xml</p>
<p>修改如下对应功能支持的值</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bool</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"profile_supported_a2dp"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">bool</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bool</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"profile_supported_a2dp_sink"</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">bool</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bool</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"profile_supported_hdp"</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">bool</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bool</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"profile_supported_hs_hfp"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">bool</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bool</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"profile_supported_hfpclient"</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">bool</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bool</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"profile_supported_hid"</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">bool</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bool</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"profile_supported_opp"</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">bool</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bool</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"profile_supported_pan"</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">bool</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bool</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"profile_supported_pbap"</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">bool</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bool</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"profile_supported_gatt"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">bool</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bool</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"pbap_include_photos_in_vcard"</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">bool</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bool</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"pbap_use_profile_for_owner_vcard"</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">bool</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bool</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"profile_supported_map"</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">bool</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bool</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"profile_supported_avrcp_controller"</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">bool</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bool</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"profile_supported_sap"</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">bool</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bool</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"profile_supported_pbapclient"</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">bool</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bool</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"profile_supported_mapmce"</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">bool</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bool</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"profile_supported_hidd"</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">bool</span>&gt;</span><br></code></pre></td></tr></table></figure>



<hr>
<hr>

        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-image">
        <a href="/2018/12/24/zbar/zbar_correct_recognize/" class="image is-7by1">
            <img class="thumbnail" src="/gallery/2.jpeg" alt="解决Zbar倾斜二维码/条形码识别不出来的情况">
        </a>
    </div>
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-12-24T09:43:14.000Z">2018-12-24</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Zbar/">Zbar</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    4 minutes read (About 547 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2018/12/24/zbar/zbar_correct_recognize/">解决Zbar倾斜二维码/条形码识别不出来的情况</a>
            
        </h1>
        <div class="content">
            <p>在使用Zbar的过程中，有时会遇到二维码/条形码倾斜45%时识别不出来的情况，然而这并不是Zbar的Bug，下面给出两种解决办法。</p>
<hr>
<h2 id="通过修改Zbar的扫描密度设置（推荐）"><a href="#通过修改Zbar的扫描密度设置（推荐）" class="headerlink" title="通过修改Zbar的扫描密度设置（推荐）"></a>通过修改Zbar的扫描密度设置（推荐）</h2><p>Zbar在对图像识别时会逐行逐列地扫描，扫描初始化设置里提供了X轴和Y轴的扫描密度的设置，将密度值设置为1，即不跨行扫描，就可以正常识别倾斜的二维码/条形码。  </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">ImageScanner.setConfig(<span class="hljs-number">0</span>, ZBAR_CFG_X_DENSITY, <span class="hljs-number">1</span>);<br>ImageScanner.setConfig(<span class="hljs-number">0</span>, ZBAR_CFG_Y_DENSITY, <span class="hljs-number">1</span>);<br></code></pre></td></tr></table></figure>

<p>注意，这里涉及到一个识别速度的问题，很多人将这个值设置为2甚至3，就是为了可以加快识别一帧图像的速度。因为设置为2时，每2行才扫描1行，识别时间更短了，但这也会丢失细节，导致倾斜二维码识别不出来。大部分情况下，Zbar识别一帧图像的时间小于1秒，为了加快一倍的识别速度，丢失识别成功率是不值得的。</p>
<p>使用JNI调用Zbar的情况，要注意检查Java和C代码里对Zbar的初始化设置有没有问题。  </p>
<hr>
<h2 id="通过图像处理矫正再识别"><a href="#通过图像处理矫正再识别" class="headerlink" title="通过图像处理矫正再识别"></a>通过图像处理矫正再识别</h2><p>将图像矫正再丢给Zbar识别，也是可以的。很多人会使用OpenCV进行图像矫正，这里提供一个处理过程：</p>
<p>resize（图像尺寸缩小）-&gt;threshold（二值化）-&gt;erode（几次膨胀腐蚀）-&gt;HoughLines（寻找直线）-&gt;筛除出二维码/一维码的边线，计算出边线的倾斜角度-&gt;warpAffine（对原图像进行仿射变换）</p>
<p>处理后再将图像丢给Zbar识别即可，OpenCV相关代码网上很多，这里就不贴了。    </p>
<p>&nbsp;<br>综上所述，这里还是推荐第一种方式。如果还是识别不出来，也许就是图像帧的质量问题，毕竟你觉得清晰的图像，Zbar并不一定觉得细节清晰。</p>

        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-image">
        <a href="/2018/12/19/opencv/opencv_correct_image/" class="image is-7by1">
            <img class="thumbnail" src="/gallery/4.jpeg" alt="使用OpenCV对二维码/条形码进行矫正">
        </a>
    </div>
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-12-19T09:00:00.000Z">2018-12-19</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/OpenCV/">OpenCV</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    4 minutes read (About 592 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2018/12/19/opencv/opencv_correct_image/">使用OpenCV对二维码/条形码进行矫正</a>
            
        </h1>
        <div class="content">
            <p>OpenCV提供了很多图像处理的API，我们可以利用这些API做一些矫正四边形物体比如二维码/条码的工作。</p>
<p>大概过程如下：</p>
<p>resize（图像尺寸缩小）-&gt;threshold（二值化）-&gt;erode（几次膨胀腐蚀）-&gt;HoughLines（寻找直线）-&gt;筛除出二维码/一维码的边线，计算出边线的倾斜角度-&gt;warpAffine（对原图像进行仿射变换）</p>
<p>下面贴具体的代码：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">correctImage</span><span class="hljs-params">(<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">char</span> *nv21, <span class="hljs-keyword">int</span> <span class="hljs-built_in">width</span>, <span class="hljs-keyword">int</span> <span class="hljs-built_in">height</span>, <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">char</span> *dest)</span> </span>&#123;<br><br>    <span class="hljs-keyword">int</span> resizeWidth = <span class="hljs-built_in">width</span>/<span class="hljs-number">2</span>;<br>    <span class="hljs-keyword">int</span> resizeHeight = <span class="hljs-built_in">height</span>/<span class="hljs-number">2</span>;<br><br>    <span class="hljs-comment">//初始化需要使用的Mat</span><br>    <span class="hljs-function">Mat <span class="hljs-title">imgMat</span><span class="hljs-params">(<span class="hljs-built_in">height</span> * <span class="hljs-number">3</span> / <span class="hljs-number">2</span>, <span class="hljs-built_in">width</span>, CV_8UC1, nv21)</span></span>;<br>    <span class="hljs-comment">//灰度图Mat</span><br>    <span class="hljs-function">Mat <span class="hljs-title">grayMat</span><span class="hljs-params">(<span class="hljs-built_in">height</span>, <span class="hljs-built_in">width</span>, CV_8UC1)</span></span>;<br>    <span class="hljs-comment">//最终结果的Mat</span><br>    <span class="hljs-function">Mat <span class="hljs-title">resultMat</span><span class="hljs-params">(<span class="hljs-built_in">height</span>, <span class="hljs-built_in">width</span>, CV_8UC1,dest)</span></span>;<br>    <span class="hljs-comment">//过程Mat</span><br>    <span class="hljs-function">Mat <span class="hljs-title">innerMat</span><span class="hljs-params">(resizeHeight, resizeWidth, CV_8UC1)</span></span>;<br>    <span class="hljs-function">Mat <span class="hljs-title">binMat</span><span class="hljs-params">(resizeHeight, resizeWidth, CV_8UC1)</span></span>;<br><br>    <span class="hljs-comment">//将yuv420sp转为灰度图</span><br>    cvtColor(imgMat, grayMat, CV_YUV420sp2GRAY);<br><br>    <span class="hljs-comment">//缩小图像尺寸以减少后面图像处理工作的耗时</span><br>    resize(grayMat, innerMat, Size(resizeWidth, resizeHeight));<br><br>    <span class="hljs-comment">//自适应二值化参数</span><br>    <span class="hljs-keyword">int</span> blockSize = <span class="hljs-number">3</span>;<br>	<span class="hljs-keyword">int</span> constValue = <span class="hljs-number">5</span>;<br>	<span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> maxVal = <span class="hljs-number">255</span>;<br><br>    <span class="hljs-comment">//自适应二值化</span><br>    adaptiveThreshold(innerMat, binMat, maxVal,ADAPTIVE_THRESH_GAUSSIAN_C, THRESH_BINARY,<br>		blockSize, constValue);<br><br>    <span class="hljs-keyword">int</span> rectWidth = resizeWidth / <span class="hljs-number">5</span>;<br>    <span class="hljs-keyword">int</span> rectHeight = resizeHeight / <span class="hljs-number">5</span>;<br>    <span class="hljs-keyword">int</span> centerX = resizeWidth / <span class="hljs-number">2</span>, centerY = resizeHeight / <span class="hljs-number">2</span>;<br><br>    Mat element = getStructuringElement(<span class="hljs-number">2</span>, Size(<span class="hljs-number">7</span>, <span class="hljs-number">7</span>));<br><br>    <span class="hljs-comment">//膨胀腐蚀</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">2</span>; i++) &#123;<br>        erode(innerMat, innerMat, element);<br>        i++;<br>    &#125;<br><br>    erode(innerMat, binMat, element);<br>    binMat = innerMat - binMat;<br><br>    <span class="hljs-comment">//寻找直线</span><br>    <span class="hljs-built_in">vector</span>&lt;Vec2f&gt; lines;<br>    HoughLines(binMat, lines, <span class="hljs-number">1</span>, CV_PI / <span class="hljs-number">150</span>, <span class="hljs-number">90</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);<br>    LOGV(<span class="hljs-string">"OpenCV_CorrectImage寻找边线，边线数量:%d"</span>, lines.<span class="hljs-built_in">size</span>());<br><br>    <span class="hljs-comment">//由于边线可能有很多，这里最多取8条边线来计算角度</span><br>    <span class="hljs-keyword">int</span> lineNum = lines.<span class="hljs-built_in">size</span>() &gt; <span class="hljs-number">8</span> ? <span class="hljs-number">8</span> : lines.<span class="hljs-built_in">size</span>();<br>    <span class="hljs-keyword">float</span> sum = <span class="hljs-number">0</span>;<br><br>    <span class="hljs-comment">//num参数记录倾斜的线条的数量</span><br>    <span class="hljs-keyword">int</span> num = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; lineNum; i++) &#123;<br>     <br>        <span class="hljs-keyword">float</span> theta = lines[i][<span class="hljs-number">1</span>];<br>        <span class="hljs-comment">//各个角度对应的theta值,相当于:角度/180*PI</span><br>        <span class="hljs-comment">//90-&gt;1.5708</span><br>        <span class="hljs-comment">//100 -&gt; 1.7453</span><br>        <span class="hljs-comment">//80 -&gt; 1.3963</span><br>        <span class="hljs-comment">//95-&gt;1.6580</span><br>        <span class="hljs-comment">//85-&gt;1.4835</span><br>        <span class="hljs-comment">//0 -&gt;0</span><br>        <span class="hljs-comment">//5-&gt;0.0872</span><br>        <span class="hljs-comment">//10 -&gt; 0.1745</span><br>        <span class="hljs-comment">//12  -&gt;0.209</span><br>        <span class="hljs-comment">//15 -&gt;0.2618</span><br>        <span class="hljs-comment">//180-&gt; 3.1415</span><br>        <span class="hljs-comment">//170 -&gt;2.967</span><br><br>        <span class="hljs-comment">// 过滤掉角度正常的，0-15度，80-100 ,170-180</span><br>        <span class="hljs-keyword">if</span> ((theta &gt;= <span class="hljs-number">0</span> &amp;&amp; theta &lt;= <span class="hljs-number">0.2618</span>) || (theta &gt;= <span class="hljs-number">1.3963</span> &amp;&amp; theta &lt;= <span class="hljs-number">1.7453</span>) ||<br>            (theta &gt;= <span class="hljs-number">2.967</span> &amp;&amp; theta &lt;= <span class="hljs-number">3.1416</span>)) &#123;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">if</span> (theta &gt;= <span class="hljs-number">1.5708</span>)<br>                theta = theta - <span class="hljs-number">1.5708</span>;<br>            LOGV(<span class="hljs-string">"OpenCV_CorrectImage寻找边线，角度:%f"</span>, theta);<br>            sum += theta;<br>            num += <span class="hljs-number">1</span>;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">//需要矫正</span><br>    <span class="hljs-keyword">if</span> (num &gt; <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-keyword">float</span> average = sum / num;<br>        <span class="hljs-comment">//转成角度</span><br>        <span class="hljs-keyword">double</span> angle = average / CV_PI * <span class="hljs-number">180</span>;<br>        LOGV(<span class="hljs-string">"OpenCV_CorrectImage寻找边线，角度:%f"</span>, angle);<br><br>        <span class="hljs-comment">//如果矫正角度大于5才矫正</span><br>        <span class="hljs-keyword">if</span> (angle &gt; <span class="hljs-number">5</span>) &#123;<br>            Point2f center;<br>            center.x = <span class="hljs-keyword">float</span>(<span class="hljs-built_in">width</span> / <span class="hljs-number">2.0</span>);<br>            center.y = <span class="hljs-keyword">float</span>(<span class="hljs-built_in">height</span> / <span class="hljs-number">2.0</span>);<br>            Mat M = getRotationMatrix2D(center, angle, <span class="hljs-number">1</span>);<br>            <span class="hljs-comment">//仿射变换，背景色填充为黑色</span><br>            warpAffine(grayMat, resultMat, M, resultMat.<span class="hljs-built_in">size</span>(), <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, Scalar(<span class="hljs-number">255</span>));          <br>            LOGV(<span class="hljs-string">"OpenCV_CorrectImage角度变换完成"</span>);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>OpenCV很多图像处理的API有各种各样的参数，不同的参数会适合不同的场景，所以以上代码也不可能适应所有场景下的二维码/条码图片。</p>

        </div>
        
        
        
    </div>
</div>









    
<div class="card card-transparent">
    <nav class="pagination is-centered" role="navigation" aria-label="pagination">
        <div class="pagination-previous is-invisible is-hidden-mobile">
            <a class="is-flex-grow has-text-black-ter" href="/page/0/">Previous</a>
        </div>
        <div class="pagination-next">
            <a class="is-flex-grow has-text-black-ter" href="/page/2/">Next</a>
        </div>
        <ul class="pagination-list is-hidden-mobile">
            
            <li><a class="pagination-link is-current" href="/">1</a></li>
            
            <li><a class="pagination-link has-text-black-ter" href="/page/2/">2</a></li>
            
        </ul>
    </nav>
</div>
</div>
                




<div class="column is-4-tablet is-4-desktop is-3-widescreen  has-order-1 column-left ">
    
        
<div class="card widget">
    <div class="card-content">
        <nav class="level">
            <div class="level-item has-text-centered" style="flex-shrink: 1">
                <div>
                    
                    <figure class="image is-128x128 has-mb-6">
                        <img class="" src="/images/avatar.png" alt="Zola">
                    </figure>
                    
                    <p class="is-size-4 is-block">
                        Zola
                    </p>
                    
                    
                    <p class="is-size-6 is-block">
                        Enjoy technology , Enjoy Life
                    </p>
                    
                    
                    <p class="is-size-6 is-flex is-flex-center has-text-grey">
                        <i class="fas fa-map-marker-alt has-mr-7"></i>
                        <span>ShenZhen,China</span>
                    </p>
                    
                </div>
            </div>
        </nav>
        <nav class="level is-mobile">
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        Posts
                    </p>
                    <a href="/archives">
                        <p class="title has-text-weight-normal">
                            13
                        </p>
                    </a>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        Categories
                    </p>
                    <a href="/categories">
                        <p class="title has-text-weight-normal">
                            9
                        </p>
                    </a>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        Tags
                    </p>
                    <a href="/tags">
                        <p class="title has-text-weight-normal">
                            26
                        </p>
                    </a>
                </div>
            </div>
        </nav>
        
        <div class="level">
            <a class="level-item button is-link is-rounded" href="https://github.com/zolad" target="_blank" rel="noopener">
                Follow</a>
        </div>
        
        
        
        <div class="level is-mobile">
            
            <a class="level-item button is-white is-marginless" target="_blank" rel="noopener"
                title="Github" href="https://github.com/zolad">
                
                <i class="fab fa-github"></i>
                
            </a>
            
        </div>
        
    </div>
</div>
    
        
    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            Links
        </h3>
        <ul class="menu-list">
        
            <li>
                <a class="level is-mobile" href="https://github.com/Zolad" target="_blank" rel="noopener">
                    <span class="level-left">
                        <span class="level-item">Zola</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">github.com</span>
                    </span>
                </a>
            </li>
        
        </ul>
        </div>
    </div>
</div>

    
        
<div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                Categories
            </h3>
            <ul class="menu-list">
            <li>
        <a class="level is-marginless" href="/categories/Android-Driver/">
            <span class="level-start">
                <span class="level-item">Android Driver</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">2</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Android-Java-framework/">
            <span class="level-start">
                <span class="level-item">Android Java framework</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">2</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Android-Map/">
            <span class="level-start">
                <span class="level-item">Android Map</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Android-System/">
            <span class="level-start">
                <span class="level-item">Android System</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">2</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Android-System-App/">
            <span class="level-start">
                <span class="level-item">Android System App</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Android-UVCCamera-libuvc/">
            <span class="level-start">
                <span class="level-item">Android UVCCamera/libuvc</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Java-Certificate/">
            <span class="level-start">
                <span class="level-item">Java Certificate</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/OpenCV/">
            <span class="level-start">
                <span class="level-item">OpenCV</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Zbar/">
            <span class="level-start">
                <span class="level-item">Zbar</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">2</span>
            </span>
        </a></li>
            </ul>
        </div>
    </div>
</div>
    
        <div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            Tag Cloud
        </h3>
        <a href="/tags/Alarm/" style="font-size: 10px;">Alarm</a> <a href="/tags/Android/" style="font-size: 20px;">Android</a> <a href="/tags/Android-Camera-Driver/" style="font-size: 10px;">Android Camera Driver</a> <a href="/tags/Android-Driver/" style="font-size: 10px;">Android Driver</a> <a href="/tags/Android-Java-framework/" style="font-size: 10px;">Android Java framework</a> <a href="/tags/Android-Kernel/" style="font-size: 10px;">Android Kernel</a> <a href="/tags/Android-KitKat/" style="font-size: 10px;">Android KitKat</a> <a href="/tags/Android-Map/" style="font-size: 10px;">Android Map</a> <a href="/tags/Android-System/" style="font-size: 10px;">Android System</a> <a href="/tags/Android-System-App/" style="font-size: 10px;">Android System App</a> <a href="/tags/Certificate-Verify/" style="font-size: 10px;">Certificate Verify</a> <a href="/tags/Decript/" style="font-size: 10px;">Decript</a> <a href="/tags/Dialer/" style="font-size: 10px;">Dialer</a> <a href="/tags/Incall/" style="font-size: 10px;">Incall</a> <a href="/tags/Java/" style="font-size: 10px;">Java</a> <a href="/tags/Key/" style="font-size: 10px;">Key</a> <a href="/tags/Map-SDK/" style="font-size: 10px;">Map SDK</a> <a href="/tags/MapView/" style="font-size: 10px;">MapView</a> <a href="/tags/OpenCV/" style="font-size: 10px;">OpenCV</a> <a href="/tags/PhoneNumber-WhiteList/" style="font-size: 10px;">PhoneNumber WhiteList</a> <a href="/tags/Power-Save/" style="font-size: 10px;">Power Save</a> <a href="/tags/SPRD/" style="font-size: 10px;">SPRD</a> <a href="/tags/UVCCamera/" style="font-size: 10px;">UVCCamera</a> <a href="/tags/Video-Call/" style="font-size: 10px;">Video Call</a> <a href="/tags/Zbar/" style="font-size: 20px;">Zbar</a> <a href="/tags/libuvc/" style="font-size: 10px;">libuvc</a>
    </div>
</div>
    
    
        <div class="column-right-shadow is-hidden-widescreen ">
        
            <div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            Recent
        </h3>
        
        <article class="media">
            
            <a href="/2019/12/07/android_driver/camera_driver_config_experience/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/gallery/11.jpeg" alt="Android Camera Driver平台(展讯、MTK)适配经验">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-12-07T02:00:00.000Z">2019-12-07</time></div>
                    <a href="/2019/12/07/android_driver/camera_driver_config_experience/" class="title has-link-black-ter is-size-6 has-text-weight-normal">Android Camera Driver平台(展讯、MTK)适配经验</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Android-Driver/">Android Driver</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/11/06/android_system_app/android_dialer_app_video_incall/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/gallery/6.jpeg" alt="Android如何屏蔽通话界面的视频彩铃">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-11-06T09:36:14.000Z">2019-11-06</time></div>
                    <a href="/2019/11/06/android_system_app/android_dialer_app_video_incall/" class="title has-link-black-ter is-size-6 has-text-weight-normal">Android如何屏蔽通话界面的视频彩铃</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Android-System-App/">Android System App</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/08/28/java_certificate_verify/java_certificate_verify_and_decript/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/gallery/5.jpeg" alt="JAVA根证书验证用户证书是否可信和解密数据">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-08-27T16:00:00.000Z">2019-08-28</time></div>
                    <a href="/2019/08/28/java_certificate_verify/java_certificate_verify_and_decript/" class="title has-link-black-ter is-size-6 has-text-weight-normal">JAVA根证书验证用户证书是否可信和解密数据</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Java-Certificate/">Java Certificate</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/08/27/uvccamera/android_uvccamera_experience_and_bug/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/gallery/3.jpeg" alt="Android UVCCamera/libuvc遇到的卡死崩溃bug和解决方法">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-08-26T16:00:00.000Z">2019-08-27</time></div>
                    <a href="/2019/08/27/uvccamera/android_uvccamera_experience_and_bug/" class="title has-link-black-ter is-size-6 has-text-weight-normal">Android UVCCamera/libuvc遇到的卡死崩溃bug和解决方法</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Android-UVCCamera-libuvc/">Android UVCCamera/libuvc</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/04/02/android_system/android_sprd_mtk_alarm_group_whitelist/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/gallery/7.jpeg" alt="Android 展讯/MTK Alarm白名单设置">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-04-01T16:00:00.000Z">2019-04-02</time></div>
                    <a href="/2019/04/02/android_system/android_sprd_mtk_alarm_group_whitelist/" class="title has-link-black-ter is-size-6 has-text-weight-normal">Android 展讯/MTK Alarm白名单设置</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Android-System/">Android System</a>
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>
        
            <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            Archives
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2019/12/">
                <span class="level-start">
                    <span class="level-item">December 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/11/">
                <span class="level-start">
                    <span class="level-item">November 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/08/">
                <span class="level-start">
                    <span class="level-item">August 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/04/">
                <span class="level-start">
                    <span class="level-item">April 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/02/">
                <span class="level-start">
                    <span class="level-item">February 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/01/">
                <span class="level-start">
                    <span class="level-item">January 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/12/">
                <span class="level-start">
                    <span class="level-item">December 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/10/">
                <span class="level-start">
                    <span class="level-item">October 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/07/">
                <span class="level-start">
                    <span class="level-item">July 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
        
            <div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                Tags
            </h3>
            <div class="field is-grouped is-grouped-multiline">
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Alarm/">
                        <span class="tag">Alarm</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Android/">
                        <span class="tag">Android</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Android-Camera-Driver/">
                        <span class="tag">Android Camera Driver</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Android-Driver/">
                        <span class="tag">Android Driver</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Android-Java-framework/">
                        <span class="tag">Android Java framework</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Android-Kernel/">
                        <span class="tag">Android Kernel</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Android-KitKat/">
                        <span class="tag">Android KitKat</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Android-Map/">
                        <span class="tag">Android Map</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Android-System/">
                        <span class="tag">Android System</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Android-System-App/">
                        <span class="tag">Android System App</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Certificate-Verify/">
                        <span class="tag">Certificate Verify</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Decript/">
                        <span class="tag">Decript</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Dialer/">
                        <span class="tag">Dialer</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Incall/">
                        <span class="tag">Incall</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Java/">
                        <span class="tag">Java</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Key/">
                        <span class="tag">Key</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Map-SDK/">
                        <span class="tag">Map SDK</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/MapView/">
                        <span class="tag">MapView</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/OpenCV/">
                        <span class="tag">OpenCV</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/PhoneNumber-WhiteList/">
                        <span class="tag">PhoneNumber WhiteList</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Power-Save/">
                        <span class="tag">Power Save</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/SPRD/">
                        <span class="tag">SPRD</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/UVCCamera/">
                        <span class="tag">UVCCamera</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Video-Call/">
                        <span class="tag">Video Call</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Zbar/">
                        <span class="tag">Zbar</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/libuvc/">
                        <span class="tag">libuvc</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
            </div>
        </div>
    </div>
</div>
        
        </div>
    
</div>

                




<div class="column is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only has-order-3 column-right ">
    
        <div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            Recent
        </h3>
        
        <article class="media">
            
            <a href="/2019/12/07/android_driver/camera_driver_config_experience/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/gallery/11.jpeg" alt="Android Camera Driver平台(展讯、MTK)适配经验">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-12-07T02:00:00.000Z">2019-12-07</time></div>
                    <a href="/2019/12/07/android_driver/camera_driver_config_experience/" class="title has-link-black-ter is-size-6 has-text-weight-normal">Android Camera Driver平台(展讯、MTK)适配经验</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Android-Driver/">Android Driver</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/11/06/android_system_app/android_dialer_app_video_incall/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/gallery/6.jpeg" alt="Android如何屏蔽通话界面的视频彩铃">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-11-06T09:36:14.000Z">2019-11-06</time></div>
                    <a href="/2019/11/06/android_system_app/android_dialer_app_video_incall/" class="title has-link-black-ter is-size-6 has-text-weight-normal">Android如何屏蔽通话界面的视频彩铃</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Android-System-App/">Android System App</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/08/28/java_certificate_verify/java_certificate_verify_and_decript/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/gallery/5.jpeg" alt="JAVA根证书验证用户证书是否可信和解密数据">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-08-27T16:00:00.000Z">2019-08-28</time></div>
                    <a href="/2019/08/28/java_certificate_verify/java_certificate_verify_and_decript/" class="title has-link-black-ter is-size-6 has-text-weight-normal">JAVA根证书验证用户证书是否可信和解密数据</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Java-Certificate/">Java Certificate</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/08/27/uvccamera/android_uvccamera_experience_and_bug/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/gallery/3.jpeg" alt="Android UVCCamera/libuvc遇到的卡死崩溃bug和解决方法">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-08-26T16:00:00.000Z">2019-08-27</time></div>
                    <a href="/2019/08/27/uvccamera/android_uvccamera_experience_and_bug/" class="title has-link-black-ter is-size-6 has-text-weight-normal">Android UVCCamera/libuvc遇到的卡死崩溃bug和解决方法</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Android-UVCCamera-libuvc/">Android UVCCamera/libuvc</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/04/02/android_system/android_sprd_mtk_alarm_group_whitelist/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/gallery/7.jpeg" alt="Android 展讯/MTK Alarm白名单设置">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-04-01T16:00:00.000Z">2019-04-02</time></div>
                    <a href="/2019/04/02/android_system/android_sprd_mtk_alarm_group_whitelist/" class="title has-link-black-ter is-size-6 has-text-weight-normal">Android 展讯/MTK Alarm白名单设置</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Android-System/">Android System</a>
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>
    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            Archives
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2019/12/">
                <span class="level-start">
                    <span class="level-item">December 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/11/">
                <span class="level-start">
                    <span class="level-item">November 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/08/">
                <span class="level-start">
                    <span class="level-item">August 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/04/">
                <span class="level-start">
                    <span class="level-item">April 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/02/">
                <span class="level-start">
                    <span class="level-item">February 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/01/">
                <span class="level-start">
                    <span class="level-item">January 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/12/">
                <span class="level-start">
                    <span class="level-item">December 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/10/">
                <span class="level-start">
                    <span class="level-item">October 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/07/">
                <span class="level-start">
                    <span class="level-item">July 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                Tags
            </h3>
            <div class="field is-grouped is-grouped-multiline">
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Alarm/">
                        <span class="tag">Alarm</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Android/">
                        <span class="tag">Android</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Android-Camera-Driver/">
                        <span class="tag">Android Camera Driver</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Android-Driver/">
                        <span class="tag">Android Driver</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Android-Java-framework/">
                        <span class="tag">Android Java framework</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Android-Kernel/">
                        <span class="tag">Android Kernel</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Android-KitKat/">
                        <span class="tag">Android KitKat</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Android-Map/">
                        <span class="tag">Android Map</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Android-System/">
                        <span class="tag">Android System</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Android-System-App/">
                        <span class="tag">Android System App</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Certificate-Verify/">
                        <span class="tag">Certificate Verify</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Decript/">
                        <span class="tag">Decript</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Dialer/">
                        <span class="tag">Dialer</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Incall/">
                        <span class="tag">Incall</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Java/">
                        <span class="tag">Java</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Key/">
                        <span class="tag">Key</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Map-SDK/">
                        <span class="tag">Map SDK</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/MapView/">
                        <span class="tag">MapView</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/OpenCV/">
                        <span class="tag">OpenCV</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/PhoneNumber-WhiteList/">
                        <span class="tag">PhoneNumber WhiteList</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Power-Save/">
                        <span class="tag">Power Save</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/SPRD/">
                        <span class="tag">SPRD</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/UVCCamera/">
                        <span class="tag">UVCCamera</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Video-Call/">
                        <span class="tag">Video Call</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Zbar/">
                        <span class="tag">Zbar</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/libuvc/">
                        <span class="tag">libuvc</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
            </div>
        </div>
    </div>
</div>
    
    
</div>

            </div>
        </div>
    </section>
    <footer class="footer">
    <div class="container">
        <div class="level">
            <div class="level-start has-text-centered-mobile">
                <a class="footer-logo is-block has-mb-6" href="/">
                
                    <img src="/images/gen.svg" alt="Zola&#39;s Blog" height="28">
                
                </a>
                <p class="is-size-7">
                &copy; 2020 Zola&nbsp;
                Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> & <a
                        href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a>
                
                </p>
            </div>
            <div class="level-end">
            
            </div>
        </div>
    </div>
</footer>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script>
<script>moment.locale("en");</script>


<script>
var IcarusThemeSettings = {
    site: {
        url: 'http://yoursite.com',
        external_link: {"enable":true,"exclude":[]}
    },
    article: {
        highlight: {
            clipboard: true,
            fold: 'unfolded'
        }
    }
};
</script>


<script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script>





<script src="/js/animation.js"></script>



<script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script>
<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script>
<script src="/js/gallery.js" defer></script>



<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update
            my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        });
    });
</script>


<script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    MathJax.Hub.Config({
        'HTML-CSS': {
            matchFontHeight: false
        },
        SVG: {
            matchFontHeight: false
        },
        CommonHTML: {
            matchFontHeight: false
        },
        tex2jax: {
            inlineMath: [
                ['$','$'],
                ['\\(','\\)']
            ]
        }
    });
});
</script>


<a id="back-to-top" title="Back to Top" href="javascript:;">
    <i class="fas fa-chevron-up"></i>
</a>
<script src="/js/back-to-top.js" defer></script>














<script src="/js/main.js" defer></script>

    
    <div class="searchbox ins-search">
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="Type something..." />
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: 'Posts',
                PAGES: 'Pages',
                CATEGORIES: 'Categories',
                TAGS: 'Tags',
                UNTITLED: '(Untitled)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js" defer></script>
<link rel="stylesheet" href="/css/search.css">
<link rel="stylesheet" href="/css/insight.css">
    
</body>
</html>